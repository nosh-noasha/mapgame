<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>× ×•×© ×•× ×•×©×”</title>
  <style>
    body {
      background-color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      direction: rtl;
    }
    .line {
      font-size: 18px;
      padding: 10px;
      display: none;
    }
    .question-container {
      display: none;
    }
    img {
      max-width: 80%;
      height: auto;
      border: 2px solid #ccc;
      margin-top: 20px;
    }
    input[type="text"] {
      margin-top: 20px;
      padding: 10px;
      font-size: 18px;
      width: 90%;
      max-width: 400px;
      direction: rtl;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      background-color: #ffd54f;
    }
    #message, #result {
      font-size: 18px;
      padding: 30px;
      white-space: pre-line;
    }
    #ending {
      display: none;
    }
  </style>
</head>
<body>

<div id="intro">
  <p class="line" id="line0">× ×•×©, ×× ×—× ×• ×›×‘×¨ ××ª×§×¨×‘×™× ×œ×¡×•×£.</p>
  <p class="line" id="line1">×™×© ×’×‘×•×œ ×›××” ××ª×” ×™×›×•×œ ×œ×¤×ª×•×¨ ×©××œ×•×ª ×¢×œ ×¢×¦××š ×‘×œ×™ ×œ×”×™×•×ª × ×¨×§×™×¡×™×¡×˜ ×•×›××” ×× ×™ ×™×›×•×œ×” ×œ×¢×‘×•×“ ×¢× ×”×¦'××˜ ×‘×œ×™ ×œ×©×‘×•×¨ ××ª ×”××—×©×‘.</p>
  <p class="line" id="line2">×œ×¤× ×™ ×©× ×’×™×¢ ×œ×¡×•×£ ×× ×™ ×××—×œ×ª ×œ×š ×™×•× ×”×•×œ×“×ª ×©××— ×•×©×›×œ ×”×—×™×™× ×©×œ×š ×™×”×™×• ××œ××™× ×‘×—×•×•×™×•×ª ×—×™×•×‘×™×•×ª ×•××¨×’×©×•×ª.</p>
  <p class="line" id="line3">×©×ª×–×›×” ×œ×”×’×©×™× ××ª ×›×œ ×”×˜×™×•×œ×™× ×©×œ×š (×¨×¦×•×™ ×‘×™×—×“ ××™×ª×™) ×•×©×ª××™×“ ×ª×—×œ×•× ×‘×’×“×•×œ ×’× ×× ×”×—×œ×•××•×ª ×œ× ×¤×¨×§×˜×™×™×.</p>
  <p class="line" id="line4">×”×™×” ×œ×™ ××ª ×”×–×›×•×ª ×œ×”×™×•×ª ××™×ª×š ×‘×™×•× ×”×”×•×œ×“×ª ×”×–××ª ×•×œ×—×’×•×’ ××ª ×”×§×™×•× ×©×œ×š ×‘×™×—×“ ××™×ª×š.</p>
  <p class="line" id="line5">××– ×™××œ×œ×”, ×‘×•× × ×¡×™×™× ×›×™ ×™×© ×œ× ×• ×˜×™×¡×” ×œ×ª×¤×•×¡.</p>
  <p class="line" id="line6">××•×›×Ÿ?</p>
</div>

<div id="ending">
  <p class="line" id="end0">×œ×¦×¢×¨× ×• ×”×’×¢× ×• ×œ×¡×•×£</p>
  <p class="line" id="end1">××§×•×•×” ×××•×“ ×©× ×”× ×™×ª, ×× ×™ × ×”× ×™×ª×™ ×œ×¨××•×ª ××•×ª×š ××©×—×§</p>
  <p class="line" id="end2">××ª×” ×‘×˜×— ××‘×•×œ×‘×œ ××™×¤×” ×”×§×•×“ ×œ××ª× ×”</p>
  <p class="line" id="end3">×× ×ª×—×©×•×‘ ×¢×œ ×–×” ×˜×™×¤×” ×ª×‘×™×Ÿ ×©×§×™×‘×œ×ª ××•×ª×• ×›×‘×¨ ×œ×¤× ×™ ×“×§×”</p>
</div>

<div class="question-container" id="questionBox">
  <img id="questionImage" src="" alt="××¤×”">
  <div><input type="text" id="answerInput" placeholder="×”×§×œ×“ ×›××Ÿ ××ª ×ª×©×•×‘×ª×š"></div>
  <div><button onclick="checkAnswer()">×‘×“×•×§</button></div>
  <div id="result"></div>
</div>

<div id="message" style="display: none;"></div>

<script>
const introLines = [...document.querySelectorAll("#intro .line")];
const endLines = [...document.querySelectorAll("#ending .line")];
let introIndex = 0;
let endIndex = 0;
let showingPause = false;
let endingStarted = false;

function showNextIntroLine() {
  if (introIndex < introLines.length) {
    introLines[introIndex].style.display = "block";
    introIndex++;
  } else {
    document.getElementById("intro").style.display = "none";
    showQuestion();
  }
}

function showEndingLine() {
  if (endIndex < endLines.length) {
    endLines[endIndex].style.display = "block";
    endIndex++;
  }
}

function handleAdvance() {
  if (endingStarted) {
    showEndingLine();
    return;
  }

  if (showingPause) {
    document.getElementById("message").style.display = "none";
    showingPause = false;
    current++;
    showQuestion();
    return;
  }

  if (!document.getElementById("questionBox").style.display || document.getElementById("questionBox").style.display === "none") {
    showNextIntroLine();
  }
}

window.addEventListener("click", handleAdvance);
window.addEventListener("touchstart", handleAdvance);

const questions = [
  { image: "mapgame_images/jpg.1.png", answer: ["×—×•×£ ×”×¦×•×§"] },
  { image: "mapgame_images/jpg.2.png", answer: ["×’×‘×¢×ª ×”×¡×¤×œ×•×œ×™×"] },
  { image: "mapgame_images/jpg.3.png", answer: ["× ×•××™"] },
  { message: "×›×œ ×–×” ×”×™×” ×—×™××•× ××• ×™×•×ª×¨ × ×›×•×Ÿ ×”×§×“××” ×›×“×™ ×©× ×•×›×œ ×œ×¢×©×•×ª ××ª ×–×” ×¤×¢× ×©× ×™×™×” ×›××• ×©×× ×™ ××•×”×‘×ª", isPause: true },
  { image: "mapgame_images/jpg.4.png", answer: ["×‘×—× 8", "×—× 8"] },
  { image: "mapgame_images/jpg.5.png", answer: ["×‘×—× 30", "×—× 30"] },
  { image: "mapgame_images/jpg.6.png", answer: ["×‘×—× 10", "×—× 10"] },
  { isPause: true, isLastPause: true }
];

let current = 0;

function showQuestion() {
  const q = questions[current];
  const box = document.getElementById("questionBox");
  const img = document.getElementById("questionImage");
  const input = document.getElementById("answerInput");
  const result = document.getElementById("result");
  const msg = document.getElementById("message");

  if (q.isPause) {
    box.style.display = "none";
    msg.innerText = q.message || "";
    msg.style.display = "block";
    if (q.isLastPause) {
      document.getElementById("ending").style.display = "block";
      endingStarted = true;
    } else {
      showingPause = true;
    }
    return;
  }

  msg.style.display = "none";
  img.src = q.image;
  input.value = "";
  result.textContent = "";
  box.style.display = "block";
}

function checkAnswer() {
  const input = document.getElementById("answerInput").value.trim();
  const result = document.getElementById("result");
  const q = questions[current];
  const normalized = input.replace(/\s|"|'/g, "");
  const isCorrect = q.answer.some(ans => normalized.includes(ans.replace(/\s/g, "")));

  if (isCorrect) {
    result.textContent = "×ª×©×•×‘×” × ×›×•× ×”! âœ…";
    setTimeout(() => {
      current++;
      if (current < questions.length) {
        showQuestion();
      } else {
        result.textContent = "×¡×™×™××ª ××ª ×›×œ ×”×—×™×“×”! ğŸ‰";
      }
    }, 2000);
  } else {
    result.textContent = "×œ× × ×›×•×Ÿ, × ×¡×” ×©×•×‘ ğŸ™ˆ";
  }
}
</script>

</body>
</html>
